# 啟用 Spring Profile: render
# 這是為了讓 Render 部署時使用的設定檔

spring.application.name=daycare-system-springboot

# 1. PostgreSQL

# 2. 資料庫連線：從環境變數讀取 (PostgreSQL)
# Render 會自動將其 Internal Database URL 注入到這些變數中
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}

# 3. JPA 設定 (每次系統重啟 會 重新建立 新的環境 並 輸入預設資料)
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false
spring.sql.init.mode=never
spring.jpa.defer-datasource-initialization=true

# 4. 郵件服務：使用 Render 提供的環境變數 (將使用真實或外部的郵件服務，而非 MailHog)
# 您必須在 Render 儀表板中設定這些環境變數的值。
spring.mail.host=${MAIL_HOST}
spring.mail.port=${MAIL_PORT}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}

# 由於在雲端通常使用真實的郵件服務（如 SendGrid/Gmail），通常需要開啟認證和 TLS
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# 5. JWT 相關 
jwt.secret=R1UldGiQ9n78zD0cdu2+Jfr55QXp7U1yRhZZnDCglg8=
jwt.expiration=1800000

# 6. 連接的 前端位置 (應指向 Render 託管的 React 前端公開 URL)
frontend.url=${FRONTEND_URL}

# 7. 上傳相關
# 雲端部署通常建議使用絕對路徑或更穩定的儲存，這裡先保持相對路徑，但要注意 Docker 容器的檔案系統
file.upload-path = /data/uploads/

spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=12MB

# 8. Render 怕撐爆 連線池
spring.datasource.hikari.maximum-pool-size=5